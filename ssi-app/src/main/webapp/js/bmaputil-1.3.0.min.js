(function(BrowserMapUtil){BrowserMapUtil.merge=function(hsh1,hsh2){var hsh={},prop;for(prop in hsh1){if(hsh1.hasOwnProperty(prop)){hsh[prop]=hsh1[prop];}}for(prop in hsh2){if(hsh2.hasOwnProperty(prop)){hsh[prop]=hsh2[prop];}}return hsh;};BrowserMapUtil.getArrayDifference=function(a,b){if(!a instanceof Array){throw new TypeError("Expected Array for a");}if(!b instanceof Array){throw new TypeError("Expected Array for b");}var i,seen=[],diff=[];for(i=0;i<b.length;i++){seen[b[i]]=true;}for(i=0;i<a.length;i++){if(!seen[a[i]]){diff.push(a[i]);}}return diff;};BrowserMapUtil.CookieManager={getCookie:function(name){if(!name||!this.cookieExists(name)){return null;}var cookieValue=decodeURIComponent(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+encodeURIComponent(name).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1"));var cookie=new Cookie(name,cookieValue);return cookie;},setCookie:function(cookie){if(!cookie.name||/^(?:expires|max\-age|path|domain|secure)$/.test(cookie.name)){return;}var sExpires="";if(cookie.expires){switch(typeof cookie.expires){case"number":sExpires="; max-age="+cookie.expires;break;case"String":sExpires="; expires="+cookie.expires;break;case"object":if(cookie.expires.hasOwnProperty("toGMTString")){sExpires="; expires="+cookie.expires.toGMTString();}break;}}document.cookie=encodeURIComponent(cookie.name)+"="+encodeURIComponent(cookie.value)+sExpires+(cookie.domain?"; domain="+cookie.domain:"")+(cookie.path?"; path="+cookie.path:"")+(cookie.secure?"; secure":"");},removeCookie:function(name){if(!name||!this.cookieExists(name)){return;}var oExpDate=new Date();oExpDate.setDate(oExpDate.getDate()-1);document.cookie=encodeURIComponent(name)+"=; expires="+oExpDate.toGMTString()+";";},cookieExists:function(name){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(name).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie);},cookiesEnabled:function(){var cookie=new Cookie("browsermap_test_cookie","browsermap_test_cookie",10,"/");this.setCookie(cookie);var testCookie=this.getCookie("browsermap_test_cookie");if(testCookie!==null){this.removeCookie("browsermap_test_cookie");return true;}return false;}};BrowserMapUtil.File={getFileExtension:function(file){var extension="";if(file&&file!==""&&file.indexOf(".")!=-1){extension=file.substring(file.lastIndexOf(".")+1,file.length);}return extension;},removeSelectorsFromFile:function(file){if(file&&file!==""){var tokens=file.split(".");if(tokens.length>2){return tokens[0]+"."+tokens[tokens.length-1];}}return file;}};BrowserMapUtil.Url={getDomainFromURL:function(url){var domain="";url=url.replace(/http:\/\/|https:\/\//,"");var slashIndex=url.indexOf("/");if(slashIndex==-1){domain=url;}else{domain=url.substring(0,slashIndex);}return domain;},decodeURLParameterValue:function(value){return decodeURIComponent(value.replace(/\+/g," "));},getURLParameters:function(url){var map={},self=this;var f=function(m,key,value){map[key]=self.decodeURLParameterValue(value);};url.replace(/[?&]+([^=&]+)=([^&]*)/gi,f);return map;},getValueForParameter:function(url,parameter){return this.getURLParameters(url)[parameter];},getURLParametersString:function(url){var urlParametersString="";if(url&&url!==""&&url.lastIndexOf("?")!=-1){urlParametersString=url.substring(url.lastIndexOf("?"),url.length);}return urlParametersString;},getFileFromURL:function(url){var file="";if(url&&url!==""){url=url.replace("https://","");url=url.replace("http://","");url=url.replace(BrowserMapUtil.Url.getURLParametersString(url),"");if(url.lastIndexOf("/")!=-1&&url[url.lastIndexOf("/")+1]!="?"){file=url.substring(url.lastIndexOf("/")+1,url.length);}}return file;},getFolderPathFromURL:function(url){var folderPath="";var tmpURL=url;tmpURL=tmpURL.replace("https://","");tmpURL=tmpURL.replace("http://","");if(tmpURL&&tmpURL!==""&&tmpURL.lastIndexOf("/")!=-1){folderPath=tmpURL.substring(0,tmpURL.lastIndexOf("/")+1);folderPath=url.substring(0,url.indexOf(folderPath))+folderPath;}return folderPath;},getSelectorsFromURL:function(url){var selectors=[];if(url&&url!==""){url=url.replace("https://","");url=url.replace("http://","");if(url.lastIndexOf("?")!=-1){url=url.substring(0,url.lastIndexOf("?"));}if(url.lastIndexOf("/")!=-1){url=url.substring(url.lastIndexOf("/")+1,url.length);var selectorCandidates=url.split(".");if(selectorCandidates.length>2){for(var i=1;i<selectorCandidates.length-1;i++){selectors.push(selectorCandidates[i]);}}}}return selectors;},addSelectorsToURL:function(url,selectors){var file=this.getFileFromURL(url),parameters=BrowserMapUtil.Url.getURLParametersString(url);file=BrowserMapUtil.File.removeSelectorsFromFile(file);if(file&&file!==""){var path=this.getFolderPathFromURL(url);var extension=BrowserMapUtil.File.getFileExtension(file);file=file.replace("."+extension,"");var newURL=path+file;if(selectors.length>0){newURL+=".";}newURL+=selectors.join(".");if(extension&&extension!==""){newURL+="."+extension;}newURL+=parameters;return newURL;}return url;},qualifyURL:function(url){var absoluteURL=null,el;if(url){el=document.createElement("div");el.innerHTML='<a href="'+encodeURI(url)+'">x</a>';absoluteURL=el.firstChild.href;}return absoluteURL;},getCanonicalURL:function(){var headElement=document.getElementsByTagName("head")[0],links,i,link,url;if(headElement){links=headElement.getElementsByTagName("link");if(links){for(i=0;i<links.length;i++){link=links[i];if(link.rel&&link.rel==="canonical"){url=link.href;break;}}}}return url;}};})(window.BrowserMapUtil=window.BrowserMapUtil||{});function Cookie(name,value,expires,path,domain,secure){if(!(this instanceof Cookie)){return new Cookie(name,value,expires,path,domain,secure);}this.name=name;this.value=value;this.expires=expires;this.path=path;this.domain=domain;this.secure=secure;}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement){if(this===null){throw new TypeError();}var t=Object(this);var len=t.length>>>0;if(len===0){return -1;}var n=0;if(arguments.length>0){n=Number(arguments[1]);if(n!=n){n=0;}else{if(n!==0&&n!=Infinity&&n!=-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n));}}}if(n>=len){return -1;}var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k;}}return -1;};}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"");};}